{"version":3,"sources":["../../src/pages/discover/discover.module.ts","../../src/pages/discover/discover.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { DiscoverPage } from './discover';\r\nimport { ComponentsModule } from '../../components/components.module';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    DiscoverPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(DiscoverPage),\r\n    ComponentsModule\r\n  ],\r\n})\r\nexport class DiscoverPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/discover/discover.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, ModalController, NavController, NavParams, Refresher, ToastController } from 'ionic-angular';\nimport { PostsProvider } from '../../providers/posts/posts';\nimport { AuthHelperProvider } from '../../providers/auth-helper/auth-helper';\n\n@IonicPage()\n@Component({\n  selector: 'page-discover',\n  templateUrl: 'discover.html'\n})\nexport class DiscoverPage {\n\n  explorePosts: Array<any> = [];\n  isInfiniteScrollEnabled = true;\n  subscriptions = []; // TODO sometime should implement this across the mobile app...\n\n  constructor(public navCtrl: NavController,\n              public modalCtrl: ModalController,\n              public navParams: NavParams,\n              public postsProvider: PostsProvider,\n              public toastCtrl: ToastController) {\n  }\n\n  ionViewWillEnter() {\n  }\n\n  ionViewDidLoad() {\n    this.getInitialPosts();\n  }\n\n  getPosts(infiniteScroll) {\n    let lastPostTime = new Date(this.explorePosts[this.explorePosts.length - 1].createdAt).getTime();\n    this.postsProvider.getExplorePosts(lastPostTime).subscribe((retrievedPictures) => {\n      this.explorePosts.push(...retrievedPictures.data);\n      infiniteScroll.complete();\n    }, (error) => {\n      infiniteScroll.complete();\n      this.isInfiniteScrollEnabled = false;\n      console.log(error);\n      if (error.status === 404) {\n        return this.toastCtrl.create({\n          message: 'No more posts available',\n          duration: 3000\n        }).present();\n      }\n      this.toastCtrl.create({\n        message: 'An error occured when getting posts',\n        duration: 3000\n      }).present();\n    });\n  }\n\n  getInitialPosts(refresher?: Refresher) {\n    this.isInfiniteScrollEnabled = true;\n    let time = new Date().getTime();\n    this.postsProvider.getExplorePosts(time).subscribe((retrievedPictures) => {\n      if (refresher) {\n        refresher.complete();\n      }\n      this.explorePosts = retrievedPictures.data;\n    }, (error) => {\n      console.log(error);\n      if (error.status === 204) {\n        return this.toastCtrl.create({\n          message: 'No more posts available',\n          duration: 3000\n        }).present();\n      }\n      this.toastCtrl.create({\n        message: 'An error occured when getting posts',\n        duration: 3000\n      }).present();\n    });\n  }\n\n  openSearchModal() {\n    let modal = this.modalCtrl.create('SearchPage');\n    modal.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/discover/discover.ts"],"sourceRoot":""}