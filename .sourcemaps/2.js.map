{"version":3,"sources":["../../src/pages/tag/tag.module.ts","../../src/pages/tag/tag.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TagPage } from './tag';\nimport { ComponentsModule } from '../../components/components.module';\n\n@NgModule({\n  declarations: [\n    TagPage\n  ],\n  imports: [\n    IonicPageModule.forChild(TagPage),\n    ComponentsModule\n  ]\n})\nexport class TagPageModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tag/tag.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Refresher, ToastController } from 'ionic-angular';\nimport { PostsProvider } from '../../providers/posts/posts';\n\n@IonicPage()\n@Component({\n  selector: 'page-tag',\n  templateUrl: 'tag.html'\n})\nexport class TagPage {\n\n  tag: string;\n  tagPosts: Array<any> = [];\n  isInfiniteScrollEnabled = true;\n\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams,\n              public postsProvider: PostsProvider,\n              public toastCtrl: ToastController) {\n    this.tag = this.navParams.get('tag');\n  }\n\n  ionViewDidLoad() {\n  }\n\n  ionViewDidEnter() {\n    this.getInitialPosts();\n\n  }\n\n  getPosts(infiniteScroll) {\n    let lastPostTime = new Date(this.tagPosts[this.tagPosts.length - 1].createdAt).getTime();\n    this.postsProvider.getTagPosts(this.tag, lastPostTime).subscribe((retrievedPictures) => {\n      this.tagPosts.push(...retrievedPictures.data);\n      infiniteScroll.complete();\n    }, (error) => {\n      infiniteScroll.complete();\n      this.isInfiniteScrollEnabled = false;\n      console.log(error);\n      if (error.status === 404) {\n        return this.toastCtrl.create({\n          message: 'No more posts available',\n          duration: 3000\n        }).present();\n      }\n      this.toastCtrl.create({\n        message: 'An error occured when getting posts',\n        duration: 3000\n      }).present();\n    });\n  }\n\n  getInitialPosts(refresher?: Refresher) {\n    this.isInfiniteScrollEnabled = true;\n    let time = new Date().getTime();\n    this.postsProvider.getTagPosts(this.tag, time).subscribe((retrievedPictures) => {\n      if (refresher) {\n        refresher.complete();\n      }\n      this.tagPosts = retrievedPictures.data;\n    }, (error) => {\n      console.log(error);\n      if (error.status === 204) {\n        return this.toastCtrl.create({\n          message: 'No more posts available',\n          duration: 3000\n        }).present();\n      }\n      this.toastCtrl.create({\n        message: 'An error occured when getting posts',\n        duration: 3000\n      }).present();\n    });\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tag/tag.ts"],"sourceRoot":""}