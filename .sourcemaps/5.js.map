{"version":3,"sources":["../../src/pages/search/search.module.ts","../../src/pages/search/search.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SearchPage } from './search';\nimport { SearchProvider } from '../../providers/search/search';\nimport { PipesModule } from '../../pipes/pipes.module';\nimport { ComponentsModule } from '../../components/components.module';\n\n@NgModule({\n  declarations: [\n    SearchPage,\n  ],\n  imports: [\n    PipesModule,\n    ComponentsModule,\n    IonicPageModule.forChild(SearchPage),\n  ],\n  providers:[\n    SearchProvider\n  ]\n})\nexport class SearchPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController, ViewController } from 'ionic-angular';\nimport { SearchProvider } from '../../providers/search/search';\nimport 'rxjs/add/operator/finally';\nimport { UsersProvider } from '../../providers/users/users';\nimport { AuthHelperProvider } from '../../providers/auth-helper/auth-helper';\n\n@IonicPage()\n@Component({\n  selector: 'page-search',\n  templateUrl: 'search.html'\n})\nexport class SearchPage {\n\n  searchTerm = '';\n  isLoading = false;\n  results;\n  isLoggedIn = false;\n  @ViewChild('searchBar') searchBar;\n\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams,\n              public viewCtrl: ViewController,\n              public searchProvider: SearchProvider,\n              public usersProvider: UsersProvider,\n              public authHelperProvider: AuthHelperProvider,\n              public toastCtrl: ToastController) {\n  }\n\n  ionViewDidLoad() {\n    this.searchProvider.getLastUsers().subscribe((data) => {\n      this.results = data;\n      this.results.data.map((result) => {\n        return result.profilePicUrl = this.usersProvider.getProfilePicUrl(result._id);\n      });\n      this.results.isLastUsers = true;\n    });\n  }\n\n  ionViewWillEnter() {\n    this.authHelperProvider.isLoggedIn().then((isLogged) => {\n      this.isLoggedIn = isLogged;\n    });\n  }\n\n  ionViewDidEnter() {\n    setTimeout(() => {\n      this.searchBar.setFocus();\n    }, 200);\n  }\n\n  dismiss() {\n    this.viewCtrl.dismiss();\n  }\n\n  onInput() {\n    if (this.searchTerm && this.searchTerm.length) {\n      this.isLoading = true;\n      this.searchProvider.search(this.searchTerm)\n        .finally(() => {\n          this.isLoading = false;\n        })\n        .subscribe((results) => {\n          this.results = results;\n          if (results.users) {\n            this.results.data.map((result) => {\n              return result.profilePicUrl = this.usersProvider.getProfilePicUrl(result._id);\n            });\n          }\n          console.log(JSON.stringify(this.results));\n        }, (error) => {\n          console.log(JSON.stringify(error));\n        });\n    }\n\n  }\n\n  followUser(userId) {\n    this.usersProvider.followUser(userId).subscribe((data) => {\n      this.toastCtrl.create({ message: data.msg, duration: 1500 }).present();\n    }, (error) => {\n      this.toastCtrl.create({ message: error.parsedBody.msg, duration: 1500 }).present();\n      console.log(JSON.stringify(error));\n    });\n  }\n\n  unFollowUser(userId) {\n    this.usersProvider.unFollowUser(userId).subscribe((data) => {\n      this.toastCtrl.create({ message: data.msg, duration: 1500 }).present();\n    }, (error) => {\n      this.toastCtrl.create({ message: error.parsedBody.msg, duration: 1500 }).present();\n      console.log(JSON.stringify(error));\n    });\n  }\n\n  openProfilePage(username) {\n    console.log(username);\n    this.navCtrl.push('ProfilePage', { username: username });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.ts"],"sourceRoot":""}