{"version":3,"sources":["../../src/pages/register/register.module.ts","../../src/pages/register/register.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { RegisterPage } from './register';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    RegisterPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(RegisterPage),\r\n  ],\r\n})\r\nexport class RegisterPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\nimport { StaticDataProvider } from '../../providers/static-data/static-data';\nimport { ValidateProvider } from '../../providers/validate/validate';\nimport { ImagePicker } from '@ionic-native/image-picker';\nimport { AuthProvider } from '../../providers/auth/auth';\nimport { BrowserTab } from '@ionic-native/browser-tab';\n\n@IonicPage()\n@Component({\n  selector: 'page-register',\n  templateUrl: 'register.html'\n})\nexport class RegisterPage {\n  registerData = {\n    firstName: '',\n    lastName: '',\n    email: '',\n    username: '',\n    password: '',\n    passwordConfirm: '',\n    dronesSelected: []\n  };\n\n  dronesArray = this.staticDataProvider.getDronesArray();\n  profilePictureFile;\n  profilePictureEncoded;\n\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams,\n              public staticDataProvider: StaticDataProvider,\n              public validateProvider: ValidateProvider,\n              public toastCtrl: ToastController,\n              public imagePicker: ImagePicker,\n              public authProvider: AuthProvider,\n              private browserTab: BrowserTab) {\n  }\n\n  onProfilePictureSelected(ev) {\n    const candidateFile = ev.target.files[0];\n    if (candidateFile) {\n      const profilePictureValidator = this.validateProvider.validateProfilePicture(candidateFile);\n      if (!profilePictureValidator.isValid) {\n        return this.toastCtrl.create({\n          message: profilePictureValidator.msg,\n          duration: 3000\n        }).present();\n      }\n      this.profilePictureFile = candidateFile;\n      const fileReader: FileReader = new FileReader();\n      fileReader.readAsDataURL(this.profilePictureFile);\n      fileReader.onload = (e) => {\n        this.profilePictureEncoded = fileReader.result;\n      };\n    }\n  }\n\n  onRegisterSubmit() {\n    const registerFormData: FormData = new FormData();\n    const registerInputValidator = this.validateProvider.validateRegisterInput(this.registerData);\n    if (!registerInputValidator.isValid) {\n      return this.toastCtrl.create({\n        message: registerInputValidator.msg,\n        duration: 3000\n      }).present();\n    }\n\n    if (this.profilePictureFile) {\n      registerFormData.append('profilePicture', this.profilePictureFile);\n    }\n\n    registerFormData.append('data', JSON.stringify(this.registerData));\n\n    this.authProvider.registerUser(registerFormData).subscribe((data) => {\n      this.toastCtrl.create({\n        message: 'You may now log in',\n        duration: 3000\n      }).present();\n      this.navCtrl.setRoot('TabsPage');\n    }, (err) => {\n      this.toastCtrl.create({\n        message: err.parsedBody.msg || 'An error occured',\n        duration: 3000\n      }).present();\n      console.log(err.parsedBody);\n    });\n  }\n\n  openTOU() {\n    this.browserTab.isAvailable().then((isAvailable: boolean) => {\n      if (isAvailable) {\n        this.browserTab.openUrl('https://dronexer.com/terms-of-use');\n      } else {\n        window.open('https://dronexer.com/terms-of-use', '_system');\n      }\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.ts"],"sourceRoot":""}